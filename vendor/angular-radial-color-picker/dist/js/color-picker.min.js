!function(e,o){"undefined"!=typeof module&&module.exports?(o("undefined"==typeof angular?require("angular"):angular),module.exports="color.picker.core"):"function"==typeof define&&define.amd?define(["angular"],o):o(e.angular)}(this,function(e){"use strict";function o(e,o){function t(){g.classList.add("click-color"),d()?(b.onSelect({color:b.selectedColor}),o.publish("selected",b.selectedColor),o.publish("hide",b.selectedColor),m.classList.add("color-shadow-animate")):(o.publish("show",b.selectedColor),v.classList.add("blur-palette-in"),v.classList.remove("blur-palette-out"))}function n(e){var t=100,n=50,r=1,l="hsla("+e+", "+t+"%, "+n+"%, "+r+")",i=o.hslToRgb(e,t,n),s=o.hslToHex(e,t,n);g.style.backgroundColor=l,m.style.borderColor=l,b.angle=e,b.selectedColor={hex:s,hsla:{hue:e,saturation:t,luminosity:n,alpha:r},rgba:{red:i.red,green:i.green,blue:i.blue,alpha:r}}}function r(){p=e[0].querySelector(".rotator"),f=e[0].querySelector(".knob"),g=e[0].querySelector(".color"),m=e[0].querySelector(".color-shadow"),v=e[0].querySelector(".color-palette"),g.addEventListener("animationend",s),f.addEventListener("transitionend",a),m.addEventListener("animationend",c),v.addEventListener("transitionend",u)}function l(){this.color&&(this.angle=o.rgbToHsl(this.color.red,this.color.green,this.color.blue).hue)}function i(){g.removeEventListener("animationend",s),f.removeEventListener("transitionend",a),m.removeEventListener("animationend",c),v.removeEventListener("transitionend",u),f=null,p=null,g=null,m=null,v=null,o.unsubscribe()}function s(){h()?(f.classList.add("zoom-knob-out"),f.classList.remove("zoom-knob-in")):(f.classList.add("zoom-knob-in"),f.classList.remove("zoom-knob-out")),g.classList.remove("click-color")}function a(e){"transform"===e.propertyName&&(h()?o.publish("shown",b.selectedColor):(v.classList.add("blur-palette-out"),v.classList.remove("blur-palette-in")))}function c(){m.classList.remove("color-shadow-animate")}function u(e){"transform"===e.propertyName&&(d()?(f.classList.add("zoom-knob-in"),f.classList.remove("zoom-knob-out")):o.publish("hidden",b.selectedColor))}function d(){var e=v.classList.contains("blur-palette-in"),o=v.classList.contains("blur-palette-out");return e||!e&&!o}function h(){return!f.classList.contains("zoom-knob-out")}var b=this;this.$onInit=r,this.$onDestroy=i,this.$onChanges=l,this.onColorSelClick=t,this.onRotatorDrag=n;var f,p,g,m,v;o.subscribe("open",function(){d()||(o.publish("show",b.selectedColor),v.classList.add("blur-palette-in"),v.classList.remove("blur-palette-out"))}),o.subscribe("close",function(){d()&&(o.publish("hide",b.selectedColor),f.classList.add("zoom-knob-out"),f.classList.remove("zoom-knob-in"))})}function t(){function e(e,o){e.angle=e.angle||0;var t=new Propeller(o[0],{angle:e.angle,inertia:.7,speed:0,onRotate:function(o){e.onRotate({angle:this.angle})},onDragStart:function(){o.addClass("dragging")},onDragStop:function(){o.removeClass("dragging")}});e.$watch("angle",function(o){t.angle=o,e.onRotate({angle:o})}),e.$on("$destroy",function(){t.stop(),t.unbind(),t=null})}var o={link:e,restrict:"A",scope:{onRotate:"&",angle:"<"}};return o}function n(e){function o(o,t){e.$applyAsync(function(){e.$broadcast(u+o,t)})}function t(o,t){var n=e.$on(u+o,t);return c.push(n),n}function n(){c.forEach(function(e){e()})}function r(e,o,t){return((1<<24)+(e<<16)+(o<<8)+t).toString(16).slice(1)}function l(e,o,t){e/=255,o/=255,t/=255;var n,r,l=Math.max(e,o,t),i=Math.min(e,o,t),s=(l+i)/2;if(l===i)n=r=0;else{var a=l-i;r=s>.5?a/(2-l-i):a/(l+i),l===e&&(n=(o-t)/a+(o<t?6:0)),l===o&&(n=(t-e)/a+2),l===t&&(n=(e-o)/a+4)}return{hue:60*n,saturation:100*r,luminosity:100*s}}function i(e,o,t){var n=s(e,o,t);return r(n.red,n.green,n.blue)}function s(e,o,t){var n,r,l;if(e/=360,o/=100,t/=100,0===o)n=r=l=t;else{var i=t<.5?t*(1+o):t+o-t*o,s=2*t-i;n=a(s,i,e+1/3),r=a(s,i,e),l=a(s,i,e-1/3)}return{red:Math.round(255*n),green:Math.round(255*r),blue:Math.round(255*l)}}function a(e,o,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?e+6*(o-e)*t:t<.5?o:t<2/3?e+(o-e)*(2/3-t)*6:e}this.publish=o,this.subscribe=t,this.unsubscribe=n,this.rgbToHex=r,this.rgbToHsl=l,this.hslToRgb=s,this.hslToHex=i;var c=[],u="color-picker."}o.$inject=["$element","ColorPickerService"],n.$inject=["$rootScope"],e.module("color.picker.core",[]).component("colorPicker",{bindings:{onSelect:"&",color:"<?ngModel"},controller:o,template:'<div class="rotator" color-picker-rotator on-rotate="$ctrl.onRotatorDrag(angle)" angle="$ctrl.angle"><div class="knob"></div></div><button type="button" class="color" ng-click="$ctrl.onColorSelClick()"></button><div class="color-shadow"></div><div class="color-palette"></div>'}),e.module("color.picker.core").directive("colorPickerRotator",t),e.module("color.picker.core").service("ColorPickerService",n)});
//# sourceMappingURL=color-picker.min.js.map